(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,a,e){},17:function(t,a,e){},19:function(t,a,e){"use strict";e.r(a);var i=e(0),n=e.n(i),s=e(5),r=e.n(s),h=(e(15),e(1)),l=e(2),o=e(7),c=e(6),u=e(8),d=e(3),v=e.n(d),y=function(){function t(a,e){Object(h.a)(this,t),this.name=a,this.canvas=e,this.backgroundFillStyle=""}return Object(l.a)(t,[{key:"init",value:function(){this.c=this.canvas.getContext("2d")}},{key:"draw",value:function(){var t=this.c;t.fillStyle=this.backgroundFillStyle,t.fillRect(0,0,this.canvas.width,this.canvas.height);for(var a=0;a<this.dataArray.length;a++){var e=this.dataArray[a],i=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),s=Math.floor(255*Math.random());t.fillStyle="rgba("+i+", 0, "+s+", 1.0)";var r=Math.ceil(this.canvas.width/this.dataArray.length);if(t.fillRect((a+1)*r,e,r,15),t.fillStyle="rgba(0, "+n+", "+s+", 1.0)",t.fillRect((a+1)*r,this.canvas.height-e,r,15),e<=8){var h=Math.floor(255*Math.random()),l=Math.floor(255*Math.random()),o=Math.floor(255*Math.random());t.fillStyle="rgba("+this.dataArray[h]+", "+this.dataArray[l]+", "+this.dataArray[o]+", 1.0)",this.backgroundFillStyle=t.fillStyle,this.fullscreen&&(document.getElementsByTagName("body")[0].style="background: "+t.fillStyle)}}}}]),t}(),f=function(){function t(a,e){Object(h.a)(this,t),this.name=a,this.canvas=e,this.pen=null}return Object(l.a)(t,[{key:"init",value:function(){this.pen=new v.a.TURTLE(this.canvas),this.pen.moveTo(this.canvas.width/2,this.canvas.height/2),this.pen.right(90),this.n=0,this.nMax=1e3}},{key:"draw",value:function(){var t,a,e,i,n=this.pen,s=n.ctx,r=this.n,h=this.nMax,l=0,o=Math.abs(this.dataArray[0]-this.dataArray[this.dataArray.length-1]),c=0,u=255,d=0,v=0,y=0;s.fillStyle="rgba(0, 0, 0, 1.0)",s.fillRect(0,0,this.canvas.width,this.canvas.height),s.strokeStyle="rgba(255, 255, 255, 1.0)",s.lineWidth=1;for(var f=0;f<this.dataArray.length;f++){var g=this.dataArray[f];l+=g,g>c&&(c=g),g<u&&(u=g),f<this.dataArray.length/3?y+=g:f<this.dataArray.length/3*2?v+=g:d+=g}t=Math.floor(l/this.dataArray.length),i=Math.floor(y/(this.dataArray.length/3)),e=Math.floor(v/(this.dataArray.length/3)),a=Math.floor(d/(this.dataArray.length/3)),n.moveTo(this.canvas.width/2,this.canvas.height/2-o),n.pendown(),s.strokeStyle="rgba("+(i+t)%255+", "+(e+t)%255+", "+(a+t)%255+", 1.0)";for(var p=r;p>0;p--)n.right(t),n.forward(c),n.right(-2*t),n.forward(255-u),n.right(-2*i),n.forward(e/3),n.right(Math.abs(2*a-i)),n.forward(e/2);n.stroke(),n.penup(),n.moveTo(this.canvas.width/2,this.canvas.height/2),this.n=(r+1)%h}}]),t}(),g=function(){function t(a,e){Object(h.a)(this,t),this.name=a,this.canvas=e,this.pen=null}return Object(l.a)(t,[{key:"init",value:function(){this.pen=new v.a.TURTLE(this.canvas),this.pen.right(270)}},{key:"draw",value:function(){var t=this.pen,a=t.ctx;a.clearRect(0,0,this.canvas.width,this.canvas.height);for(var e=this.dataArray[0],i=this.dataArray[0],n=this.dataArray[0],s=this.dataArray[0],r=this.dataArray[0],h=this.dataArray[0],l=Math.floor(this.dataArray.length/3),o=1,c=0;c<this.dataArray.length;c++){var u=this.dataArray[c];c<l?u>i?i=u:u<e&&(e=u):c>l&&c<2*l?u>s?s=u:u<n&&(n=u):c>2*l&&(u>h?h=u:u<r&&(r=u))}a.fillStyle="rgba(0,0,0,1.0)",a.fillRect(0,0,this.canvas.width,this.canvas.height),o=Math.abs(h-e)/255,a.strokeStyle="rgba("+e+",255,0,"+o+")",a.lineWidth=12*(1-o);var d=3+Math.floor((i-e)/2/8),v=100,y=360/d,f=180/d*(Math.PI/180),g=v/(2*Math.sin(f)),p=this.canvas.width/2-g,A=this.canvas.height/2+v/2;t.moveTo(p,A),t.pendown();for(var b=[],m=0;m<d;m++)b.push([t.x,t.y]),t.forward(v),t.right(y);t.stroke(),t.penup();for(var w=0;w<b.length;w++)for(var k=b[w][0],M=b[w][1],x=0;x<b.length-w;x++){var S=b[w+x][0],T=b[w+x][1];t.moveTo(k,M),t.pendown(),a.lineTo(S,T),t.penup()}t.penup(),o=Math.abs(i-n)/255,a.strokeStyle="rgba(0,"+n+",255,"+o+")",a.lineWidth=10*(1-o),v=100,y=360/(d=3+Math.floor((s-n)/2/8)),f=180/d*(Math.PI/180),g=v/(2*Math.sin(f)),p=this.canvas.width/2-g,A=this.canvas.height/2+v/2,t.moveTo(p,A),t.pendown();for(var C=[],P=0;P<d;P++)C.push([t.x,t.y]),t.forward(v),t.right(y);t.stroke(),t.penup();for(var E=0;E<C.length;E++)for(var F=C[E][0],L=C[E][1],j=0;j<C.length-E;j++){var O=C[E+j][0],R=C[E+j][1];t.moveTo(F,L),t.pendown(),a.lineTo(O,R),t.penup()}t.penup(),o=Math.abs(s-r)/255,a.strokeStyle="rgba(255,0,"+r+","+o+")",a.lineWidth=8*(1-o),v=100,y=360/(d=3+Math.floor((h-r)/2/8)),f=180/d*(Math.PI/180),g=v/(2*Math.sin(f)),p=this.canvas.width/2-g,A=this.canvas.height/2+v/2,t.moveTo(p,A),t.pendown();for(var V=[],B=0;B<d;B++)V.push([t.x,t.y]),t.forward(v),t.right(y);t.stroke(),t.penup();for(var D=0;D<V.length;D++)for(var W=V[D][0],z=V[D][1],U=0;U<V.length-D;U++){var I=V[D+U][0],J=V[D+U][1];t.moveTo(W,z),t.pendown(),a.lineTo(I,J),t.penup()}}}]),t}(),p=function(){function t(a,e){Object(h.a)(this,t),this.name=a,this.canvas=e}return Object(l.a)(t,[{key:"init",value:function(){this.pen=new v.a.TURTLE(this.canvas)}},{key:"draw",value:function(){var t=this.pen,a=t.ctx;a.fillStyle="rgba(0,0,0,1.0)",a.fillRect(0,0,this.canvas.width,this.canvas.height),a.lineWidth=3,t.moveTo(0,0),t.pendown(),t.right(90),t.right(45),t.stroke();for(var e=0;e<this.dataArray.length-1;e++){var i=this.dataArray[e],n=this.dataArray[e+1];if(a.lineWidth=4*Math.abs(i-n),e<this.dataArray.length/3?a.strokeStyle="rgba("+i+",125,"+Math.abs(i-n)+",1.0)":e>this.dataArray.length/3&&e<this.dataArray.length/3*2?a.strokeStyle="rgba("+Math.abs(i-n)+","+i+",125,1.0)":a.strokeStyle="rgba(125,"+Math.abs(i-n)+","+i+",1.0)",e===Math.floor(this.dataArray.length/3)){t.penup(),t.dir=135;var s=this.canvas.width;t.moveTo(s,0),t.pendown(),t.stroke()}else if(e===Math.floor(this.dataArray.length/3*2)){t.penup(),t.dir=270;var r=this.canvas.width/2,h=this.canvas.height;t.moveTo(r,h),t.pendown(),t.stroke()}t.right(i-n),t.forward(3),t.stroke()}}}]),t}(),A=function(){function t(a){Object(h.a)(this,t),this.name=a}return Object(l.a)(t,[{key:"init",value:function(){this.pen=new v.a.TURTLE(this.canvas)}},{key:"draw",value:function(){var t=this.pen,a=t.ctx;a.fillStyle="rgba(0,0,0,1.0)",a.fillRect(0,0,this.canvas.width,this.canvas.height),t.moveTo(0,this.canvas.height/3),t.pendown(),t.dir=0;for(var e=0;e<this.dataArray.length-1;e++){var i=this.dataArray[e],n=this.dataArray[e+1];if(a.lineWidth=20*Math.abs(i-n),e<this.dataArray.length/4?a.strokeStyle="rgba("+i+","+4*Math.abs(i-n)+","+n+",0.5)":e>this.dataArray.length/4&&e<this.dataArray.length/4*2?a.strokeStyle="rgba(0,"+i+","+14*Math.abs(i-n)+",0.5)":2*(e>this.dataArray.length/4)&&e<this.dataArray.length/4*3?a.strokeStyle="rgba(0,"+i+","+n+",0.5)":a.strokeStyle="rgba("+10*Math.abs(i-n)+","+n+","+i+",0.5)",e===Math.floor(this.dataArray.length/4)){t.penup(),t.dir=0;var s=this.canvas.height/3*2;t.moveTo(0,s),t.pendown()}else if(e===Math.floor(this.dataArray.length/4*2)){t.penup(),t.dir=180;var r=this.canvas.width,h=this.canvas.height/3;t.moveTo(r,h),t.pendown()}else if(e===Math.floor(this.dataArray.length/4*3)){t.penup(),t.dir=180;var l=this.canvas.width,o=this.canvas.height/3*2;t.moveTo(l,o),t.pendown()}t.right(i-n),t.forward(3),t.stroke()}}}]),t}(),b=function(){function t(a,e){Object(h.a)(this,t),this.name=a,this.canvas=e}return Object(l.a)(t,[{key:"init",value:function(){this.c=this.canvas.getContext("2d")}},{key:"draw",value:function(){var t=this.c;t.fillStyle="rgba(0,0,0,1.0)",t.fillRect(0,0,this.canvas.width,this.canvas.height);for(var a=-20,e=20,i=0;i<this.dataArray.length;i++){var n=this.dataArray[i];a+40<this.canvas.width?a+=40:(a=20,e+=40);var s=20*(1-Math.abs(128-n)/128),r=Math.floor(255*(1-n/256));this.canvasContext.fillStyle="rgba("+n+","+2*Math.abs(n-r)+","+r+",1.0)",this.canvasContext.beginPath(),this.canvasContext.arc(a,e,s,0,2*Math.PI,!1),this.canvasContext.fill(),this.canvasContext.fillStyle="rgba("+Math.abs(n-r)+","+n+","+r+",1.0)",this.canvasContext.beginPath(),this.canvasContext.arc(a,e,s/2,0,2*Math.PI,!1),this.canvasContext.fill()}}}]),t}(),m=(e(17),function(t){function a(t){var e;return Object(h.a)(this,a),(e=Object(o.a)(this,Object(c.a)(a).call(this,t))).state={visuals:[]},e.audioPlayer=null,e.audioContext=null,e.audioPlayerSource=null,e.audioAnalyser=null,e.bufferLength=0,e.dataArray=null,e.canvas=null,e.canvasContext=null,e.backgroundFillStyle="",e.pen=null,e.processAudioHandle=null,e.selectedVisual=0,e.audioPlayerFile=null,e.fullscreen=!1,e.visualsList=null,e}return Object(u.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.canvas.width=800,this.canvas.height=600,this.canvas.addEventListener("click",function(){t.fullscreen||(t.audioPlayer.style="display: none",t.audioPlayerFile.style="display: none",t.visualsList.style="display: none",t.canvas.style="border: none",document.getElementsByTagName("body")[0].style="background: #000000",document.documentElement.requestFullscreen(),t.fullscreen=!0,t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight)}),this.exitFullscreen=this.exitFullscreen.bind(this),document.addEventListener("fullscreenchange",this.exitFullscreen),document.addEventListener("webkitfullscreenchange",this.exitFullscreen),document.addEventListener("mozfullscreenchange",this.exitFullscreen),document.addEventListener("MSFullscreenChange",this.exitFullscreen),this.setState(function(){return{visuals:[new y("Jeremy Visual 1",t.canvas),new f("Jeremy Visual 2",t.canvas),new g("Daphne Visual 1",t.canvas),new p("Daphne Visual 2",t.canvas),new A("Daphne Visual 3",t.canvas),new b("Daphne Visual 4",t.canvas)]}}),this.createAudioPlayer(),this.createAudioContext(function(){t.createAudioPlayerSource(),t.createAudioAnalyzer(2048),t.createAudioBuffer(),t.fillAudioBuffer(),t.connectAudioPlayerSourceToAudioAnalyzer(),t.connectAudioAnalyzerToDestination(),t.createCanvasContext(),t.createTurtle(),t.changeVisual(t.selectedVisual),t.audioPlayerFile.onchange=t.changeAudioFile.bind(t),t.processAudio()})}},{key:"exitFullscreen",value:function(){!this.fullscreen||document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(this.audioPlayer.style="display: inline-block",this.audioPlayerFile.style="display: inline-block",this.visualsList.style="display: block",this.canvas.style="border: 1px solid silver",document.getElementsByTagName("body")[0].style="background: #FFFFFF",this.fullscreen=!1,this.canvas.width=800,this.canvas.height=600)}},{key:"createAudioPlayer",value:function(){this.audioPlayer.src="audio/defcronyke-bucket_dumpster-02-touch_you.ogg",this.audioPlayer.setAttribute("type","audio/ogg"),this.audioPlayer.setAttribute("controls",""),this.audioPlayer.id="audio-player"}},{key:"createAudioContext",value:function(t){var a=this;this.audioPlayer.onplay=function(){a.audioContext||(a.audioContext=new AudioContext,"function"===typeof t&&t())}}},{key:"createAudioPlayerSource",value:function(){this.audioPlayerSource=this.audioContext.createMediaElementSource(this.audioPlayer)}},{key:"createAudioAnalyzer",value:function(t){this.audioAnalyser=this.audioContext.createAnalyser(),this.audioAnalyser.fftSize=t,this.bufferLength=this.audioAnalyser.frequencyBinCount}},{key:"createAudioBuffer",value:function(){this.dataArray=new Uint8Array(this.bufferLength)}},{key:"fillAudioBuffer",value:function(){this.audioAnalyser.getByteTimeDomainData(this.dataArray)}},{key:"connectAudioPlayerSourceToAudioAnalyzer",value:function(){this.audioPlayerSource.connect(this.audioAnalyser)}},{key:"connectAudioAnalyzerToDestination",value:function(){this.audioAnalyser.connect(this.audioContext.destination)}},{key:"createCanvasContext",value:function(){this.canvasContext=this.canvas.getContext("2d"),this.canvasContext.fillStyle="rgba(0, 0, 0, 1.0)",this.canvasContext.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.backgroundFillStyle="rgba(0, 0, 0, 1.0)"}},{key:"createTurtle",value:function(){this.pen=new v.a.TURTLE(this.canvas),this.pen.moveTo(this.canvas.width/2,this.canvas.height/2)}},{key:"processAudio",value:function(){this.processAudioHandle=requestAnimationFrame(this.processAudio.bind(this)),this.audioAnalyser.getByteTimeDomainData(this.dataArray);for(var t=!0,a=0;a<this.bufferLength;a++){128!==this.dataArray[a]&&(t=!1)}t||this.state.visuals.length>this.selectedVisual&&this.state.visuals[this.selectedVisual].draw.bind(this)()}},{key:"changeVisual",value:function(t){this.selectedVisual=t,this.state.visuals.length>t&&(console.log("Changing to visual: "+this.state.visuals[this.selectedVisual].name),this.state.visuals[this.selectedVisual].init.bind(this)())}},{key:"changeAudioFile",value:function(){this.audioPlayerFile.files[0]&&(this.audioPlayer.src=URL.createObjectURL(this.audioPlayerFile.files[0]),this.createAudioContext())}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement("canvas",{ref:function(a){return t.canvas=a},style:{border:"1px solid silver"}})),n.a.createElement("div",null,n.a.createElement("audio",{ref:function(a){return t.audioPlayer=a}})),n.a.createElement("div",null,n.a.createElement("input",{ref:function(a){return t.audioPlayerFile=a},type:"file"})),n.a.createElement("div",{ref:function(a){return t.visualsList=a}},this.state.visuals.map(function(a,e){return n.a.createElement("p",{key:e},n.a.createElement("span",{onClick:function(){return t.changeVisual(e)},style:{cursor:"pointer"}},a.name))}),n.a.createElement("p",null,"Copyright \xa9 2019 Jeremy Carter | ",n.a.createElement("a",{href:"https://github.com/defcronyke/audio-visuals"},"Source Code")," | Part of ",n.a.createElement("a",{href:"https://eternalvoid.net"},"The Eternal Void Network"))))}}]),a}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,a,e){t.exports=e(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.171906bb.chunk.js.map